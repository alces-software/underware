debug: true

#
# BASE
#
cluster: '<%= answer.cluster_name %>'
root_password: '<%= answer.root_password %>'
configured_build_interface: '<%= answer.configured_build_interface %>'
publickey: '<%= domain.keys.public %>'
privatekey: '<%= domain.keys.private %>'
role: '<%=answer.role%>'


# PLATFORM: CLOUD
renderedurl: https://s3-eu-west-1.amazonaws.com/stufranks/rendered/<%=node.platform%>/node/<%=node.name%>
nodescripturl: <%= config.renderedurl %>/main.sh


#
# NETWORKS
#
domain: '<%= answer.domain %>'

domainnetwork: '10.10.0.0'
domainnetmask: '255.255.0.0'

controllernetworking: false
internaldns: 10.10.0.1
searchdomains: "<%= config.networks.network1.domain %> <%= config.domain %>"
gateway: <%= answer.is_gateway %>

networks:
  network1:
    defined: true
    domain:  'pri'
    interface: 'em1'
    short_hostname: '<%= node.name %>.<%= config.networks.network1.domain %>'
    hostname: '<%= config.networks.network1.short_hostname %>.<%= config.domain %>'
    ip: "10.10.<%= node.group.index %>.<%= node.index.to_i + 100 %>"
    netmask: 255.255.224.0
    network: 10.10.0.0
    gateway: 10.10.0.1
    primary: true
  network2:
    defined: <%= answer.network2_defined %>
    domain: 'mgt'
    interface: 'em2'
    short_hostname: '<%= node.name %>.<%= config.networks.network2.domain %>'
    hostname: '<%= config.networks.network2.short_hostname %>.<%= config.domain %>'
    ip: "10.10.<%= node.group.index.to_i + 32 %>.<%= node.index.to_i + 100 %>"
    netmask: 255.255.224.0
    network: 10.10.32.0
  network3:
    defined: <%= answer.network3_defined %>
    domain: 'ib'
    interface: 'ib0'
    short_hostname: '<%= node.name %>.<%= config.networks.network3.domain %>'
    hostname: '<%= config.networks.network3.short_hostname %>.<%= config.domain %>'
    ip: "10.10.<%= node.group.index.to_i + 64 %>.<%= node.index.to_i + 100 %>"
    netmask: 255.255.224.0
    network: 10.10.64.0

external:
  defined: <%= if config.role == 'login' then true else false end %>
